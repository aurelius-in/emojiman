<!DOCTYPE html>
<html>
<head>
  <title>Pac-Man</title>
  <style>
    canvas {
      border: 0px;
    }
    body {
      margin: 0;
      padding: 0;
      touch-action: manipulation;
    }
  </style>
</head>
<body>

<canvas id="gameCanvas" width="351" height="780"></canvas>

<script>
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');

  let pacmanX = 32.5;
  let pacmanY = 32.5;
  let pacmanRadius = 16.25;
  let pacmanSpeed = 3;
  let angle = 0;
  let direction = 'right';

  const maze = [
    '111111111111111',
    '122222222222221',
    '121111111111121',
    '121122222221121',
    '111121111121111',
    '222222222222222',
    '111121111121111',
    '121121111121121',
    '121122222221121',
    '121111111111121',
    '122222222222221',
    '111111111111111'
  ];

  function checkCollision(x, y) {
    const gridX = Math.floor(x / 25);
    const gridY = Math.floor(y / 65);
    return maze[gridY][gridX] === '1';
  }

  function gameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    for (let y = 0; y < maze.length; y++) {
      for (let x = 0; x < maze[y].length; x++) {
        if (maze[y][x] === '1') {
          ctx.fillStyle = '#0000FF';
          ctx.fillRect(x * 25, y * 65, 25, 65);
        }
      }
    }

    ctx.fillStyle = '#FFFF00';
    ctx.beginPath();
    ctx.moveTo(pacmanX, pacmanY);
    ctx.arc(pacmanX, pacmanY, pacmanRadius, angle, angle + Math.PI * 1.8);
    ctx.lineTo(pacmanX, pacmanY);
    ctx.fill();

    let nextX = pacmanX;
    let nextY = pacmanY;

    if (direction === 'up') nextY -= pacmanSpeed;
    if (direction === 'down') nextY += pacmanSpeed;
    if (direction === 'left') nextX -= pacmanSpeed;
    if (direction === 'right') nextX += pacmanSpeed;

    if (!checkCollision(nextX, nextY)) {
      pacmanX = nextX;
      pacmanY = nextY;
    }

    angle += 0.1;
    if (angle > Math.PI / 4) angle = 0;

    requestAnimationFrame(gameLoop);
  }

  gameLoop();
</script>

</body>
</html>
